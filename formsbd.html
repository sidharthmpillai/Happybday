<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Happy Birthday!</title>
    <link rel="stylesheet" href="bdaystyles.css">
</head>
<body>

    <div class="form-section" id="form-section">
        <h2>Fill the Form</h2>
        <form>
            <input type="hidden" name="captcha" value="false">
            <label for="wish">What do you wish to have on this Birthday?</label>
            <input type="text" name="wish" id="wish" placeholder="Your wish" required>
            <button type="submit">Start</button>
        </form>
    </div>

    <div id="loading" style="display: none;">
        <div class="loader"></div>
    </div>

    <div id="content" style="display: none;">
    
    </div> 

    <div class="container hidden" id="birthday-page">
        <header>
            <h1 id="greeting">Happy Birthday!</h1>
            <p id="foryou">This page is just for you.</p>
        </header>

        <section>
            <h2>Happiee 17...&#10084;</h2>
            <p>This is probably the first time I'm wishing you on your exact birthday.</p>
            <p><strong>Your Wish:</strong> <span id="famwish"></span></p> <!-- Added span for the wish -->
        </section>

        <section class="gallery">
            <h2>Some Special Moments</h2>
            <img src="https://raw.githubusercontent.com/sidharthmpillai/Happybday/refs/heads/main/me.jpg.jpeg" alt="Special moment 1">
            <img src="https://raw.githubusercontent.com/sidharthmpillai/Happybday/refs/heads/main/Her.jpg" alt="Special moment 2">
            <img src="photo3.jpg" alt="Special moment 3">
            <img src="photo4.jpg" alt="Special moment 4">
        </section>

        <section class="messages">
            <h2>Your loved ones</h2>
            <div class="message-box">
                <p><a href="famgift.html"><strong>Most Important</strong></a></p>
            </div>
            <div class="message-box">
                <p><a href="friendgift.html"><strong>Your Preference</strong></a></p>
            </div>
        </section>

        <section class="countdown">
            <p id="countdown"></p>
        </section>

        <section class="music-control">
            <h2>Birthday Song</h2>
            <audio id="birthday-song" controls>
                <source src="sirivennelaedit.mp3.mp3" type="audio/mpeg">
            </audio>
        </section>
    </div>

    <footer>
        <p id="bottom"> Created with ❤️ by Sidharth</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loadingElement = document.getElementById("loading");
            const contentElement = document.getElementById("content");

            if (sessionStorage.getItem('formSubmitted') === 'true') {
                const wish = sessionStorage.getItem('userWish');

                document.getElementById('form-section').classList.add('hidden');
                document.getElementById('birthday-page').classList.remove('hidden');

                document.getElementById('famwish').innerText = wish;

                startCountdown();
                playAudio(); // Play audio when the page is loaded if the form is already submitted
            }

            document.querySelector('form').addEventListener('submit', function(event) {
                event.preventDefault(); 

                const wish = document.getElementById('wish').value;

                sessionStorage.setItem('formSubmitted', 'true');
                sessionStorage.setItem('userWish', wish);

                document.getElementById('form-section').classList.add('hidden');
                document.getElementById('birthday-page').classList.remove('hidden');

                document.getElementById('famwish').innerText = wish;

                startCountdown();
                playAudio(); // Play audio after form submission
            });
        });

        function playAudio() {
            const audioElement = document.getElementById('birthday-song');
            audioElement.play().catch(error => {
                console.log('Autoplay was prevented. User interaction may be required:', error);
            });
        }

        window.onload = function() {
            const loadingElement = document.getElementById("loading");
            const contentElement = document.getElementById("content");

            loadingElement.style.display = "block";

            setTimeout(function() {
                loadingElement.style.display = "none";
                contentElement.style.display = "block";
            }, 1500);
        };

        function startCountdown() {
            // Countdown logic can be implemented here if needed
        }
    </script>
</body>
</html>

